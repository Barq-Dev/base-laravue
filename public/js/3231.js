"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3231],{1823:(t,e,a)=>{a.d(e,{Z:()=>s});var r=a(23645),i=a.n(r)()((function(t){return t[1]}));i.push([t.id,".clickable:hover{cursor:pointer}",""]);const s=i},70131:(t,e,a)=>{a.d(e,{Z:()=>l});const r={props:["items"],data:function(){return{search:"",loading:!1,selection:[]}},methods:{reserve:function(t){this.$router.push({path:"peminjaman-buku",query:{buku_id:t.id}})}},computed:{filteredData:function(){var t=this;return this.search?this.items.filter((function(e){return e.title.toLowerCase().includes(t.search)})):this.items}}};var i=a(93379),s=a.n(i),n=a(1823),o={insert:"head",singleton:!1};s()(n.Z,o);n.Z.locals;const l=(0,a(51900).Z)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-row",{staticClass:"mx-2"},[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-text-field",{staticClass:"mr-2",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),t._v(" "),t.filteredData.length?a("v-row",{staticClass:"ma-2"},t._l(t.filteredData,(function(e,r){return a("v-col",{key:r,attrs:{cols:"12",sm:"12",md:"3"}},[a("v-card",{attrs:{loading:t.loading}},[a("template",{slot:"progress"},[a("v-progress-linear",{attrs:{color:"deep-purple",height:"10",indeterminate:""}})],1),t._v(" "),a("v-img",{staticClass:"clickable",attrs:{height:"250",src:e.image_link},on:{click:function(a){return t.$emit("click",e)}}}),t._v(" "),a("v-card-title",{class:{subheading:t.$vuetify.breakpoint.xs}},[t._v(t._s(e.title))]),t._v(" "),a("v-card-text",[a("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[a("div",{staticClass:"text-subtitle-1"},[t._v("\n              "+t._s(e.author)+" • "+t._s(e.tahun)+" • "+t._s(e.penerbit)+"\n            ")])]),t._v(" "),a("div",{staticClass:"my-4 text-subtitle-1"},[e.tags&&e.tags.length?t._l(e.tags,(function(e,r){return a("span",{key:r,staticClass:"grey--text"},[t._v("#"+t._s(e)+",\n              ")])})):a("span",{staticClass:"grey--text"},[t._v(" #no-tags")])],2)],1),t._v(" "),a("v-divider",{staticClass:"mx-4"}),t._v(" "),a("v-card-actions",[a("v-btn",{staticClass:"white--text",attrs:{disabled:!e.stock,depressed:"",small:"",color:"green"},on:{click:function(a){return t.reserve(e)}}},[a("v-icon",[t._v("shopping_bag")]),t._v("\n            Pinjam\n          ")],1),t._v(" "),a("v-spacer"),t._v(" "),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(r){var i=r.on,s=r.attrs;return[a("v-chip",t._g(t._b({attrs:{color:e.stock?"info":"warning",small:""}},"v-chip",s,!1),i),[t._v("\n                "+t._s(e.stock||0)+"\n                "),a("v-icon",{attrs:{small:"",right:""}},[t._v("book")])],1)]}}],null,!0)},[t._v(" "),a("span",[t._v(t._s(e.stock?"Tersedia "+e.stock+" buku":"Buku Kosong"))])])],1)],2)],1)})),1):a("div",{staticClass:"text-center mt-2"},[a("img",{attrs:{width:"500",src:"/images/empty.png"}}),t._v(" "),a("h3",{staticClass:"mb-3 grey--text"},[t._v("Tidak ada data")])]),t._v(" "),a("div",{staticClass:"text-center"},[a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{cols:"8"}},[a("v-container",{staticClass:"max-width"},[a("v-pagination",{staticClass:"my-4",attrs:{length:t.$store.state.base.options.last_page},model:{value:t.$store.state.base.options.current_page,callback:function(e){t.$set(t.$store.state.base.options,"current_page",e)},expression:"$store.state.base.options.current_page"}})],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},63231:(t,e,a)=>{a.r(e),a.d(e,{default:()=>j});var r=a(80001),i=a(20629),s=a(8093),n=a(39922);function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){c(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const u={props:["form","dialog"],components:{BarqunDatePicker:s.Z,BarqunVSelect:n.Z},data:function(){return{}},methods:l(l({},(0,i.OI)("base",["CLEAR_ERRORS"])),{},{handleFileUpload:function(t){this.form["file_"+t]=this.$refs[t].getFiles().length?this.$refs[t].getFiles()[0].file:null},getFiles:function(t){return this.form.id&&this.form[t]?["/storage/uploads/foto/"+this.form[t]]:""},setDates:function(){this.form.id||(this.$set(this.form,"tanggal",new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)),this.$set(this.form,"tanggal_kembali",new Date((new Date).setDate((new Date).getDate()+3)-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)))}}),created:function(){this.setDates()},watch:{dialog:function(t){t&&this.CLEAR_ERRORS(),this.setDates()}},computed:l(l({},(0,i.rn)("base",["errors"])),(0,i.rn)("auth",["user"]))};var d=a(51900);const m=(0,d.Z)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._.isEmpty(t.errors)?t._e():a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-alert",{attrs:{border:"top",color:"red lighten-2",dark:""}},[a("ul",t._l(t.errors,(function(e){return a("li",{key:e[0]},[t._v(t._s(e[0]))])})),0)])],1)],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"2",sm:"12",md:"6"}},[a("BarqunVSelect",{attrs:{autocomplete:"",clearable:"",name:"buku_id",form:t.form,itemValue:"id",itemText:function(t){return(t.kode||"")+" "+t.title},url:"buku?stock=ready"+(this.form.id?"&edit=true":""),label:"Buku"}})],1),t._v(" "),t.userRole("peserta-didik",!1)?a("v-col",{attrs:{cols:"2",sm:"12",md:"6"}},[a("BarqunVSelect",{attrs:{autocomplete:"",clearable:"",name:"peserta_didik_id",form:t.form,itemValue:"id",itemText:function(t){return(t.nisn||"")+" "+t.nama},url:"peserta-didik",label:"Peserta Didik"}})],1):t._e(),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("BarqunDatePicker",{attrs:{label:"Tanggal Pinjam",field:"tanggal",form:t.form,required:""}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[a("BarqunDatePicker",{attrs:{label:"Tanggal Kembali",field:"tanggal_kembali",form:t.form,required:""}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-textarea",{attrs:{label:"Keterangan"},model:{value:t.form.keterangan,callback:function(e){t.$set(t.form,"keterangan",e)},expression:"form.keterangan"}})],1),t._v(" "),a("v-divider"),t._v(" "),t.form.id?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-select",{attrs:{label:"Status Peminjaman",items:["Dikembalikan","Hilang"],outlined:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1):t._e()],1)],1)}),[],!1,null,null,null).exports;function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function f(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const b={props:["id"],data:function(){return{search:"",headers:[]}},mounted:function(){this.load()},computed:f(f({},(0,i.rn)("base",["loading","item"])),{},{filteredItem:function(){return this._.difference(Object.keys(this.item),["id","deskripsi","image","image_link","peminjaman","created_at","updated_at"])}}),watch:{id:function(){this.load()}},methods:f(f({},(0,i.nv)("base",["getData"])),{},{load:function(){this.getData({customUrl:"buku",id:this.id||this.$route.params.id,params:{with:["peminjaman.pesertaDidik"]}})}})};const g=(0,d.Z)(b,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",{attrs:{loading:t.loading}},[a("v-card-title",{staticClass:"sticky blue white--text",attrs:{"primary-title":""}},[t._v("\n      Detail Buku\n      "),a("v-spacer")],1),t._v(" "),a("v-divider"),t._v(" "),a("div",{staticClass:"pa-5"},[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"4"}},[a("v-img",{attrs:{width:"400",src:t.item.image_link}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"8"}},[a("v-card-title",{staticClass:"blue white--text",attrs:{"primary-title":""}},[t._v("\n            Data Buku\n          ")]),t._v(" "),t._.isEmpty(t.item)?t._e():a("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("tbody",t._l(t.filteredItem,(function(e,r){return a("tr",{key:r},[a("td",{attrs:{width:"10"}},[t._v(t._s(t._.startCase(e)))]),t._v(" "),a("td",{attrs:{width:"10"}},[t._v(":")]),t._v(" "),a("td",[t._v(t._s(t.item[e]))])])})),0)]},proxy:!0}],null,!1,3052676482)})],1),t._v(" "),t.item.deskripsi?a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("h3",[t._v("Deskipsi :")]),t._v(" "),a("p",{attrs:{align:"justify"}},[t._v(t._s(t.item.deskripsi))])]):t._e()],1)],1)],1)],1)}),[],!1,null,null,null).exports;function _(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?_(Object(a),!0).forEach((function(e){k(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function k(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const y={data:function(){return{item:{},dialog:!1}},components:{CardGrid:a(70131).Z,ModulShow:g},created:function(){this.$store.commit("base/SET_MODULE_NAME","Buku"),this.getData()},computed:h({},(0,i.rn)("base",["items"])),methods:h(h({},(0,i.nv)("base",["getData"])),{},{clicked:function(t){this.item=t,this.dialog=!0}})};const O=(0,d.Z)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("CardGrid",{attrs:{items:t.items},on:{click:t.clicked}}),t._v(" "),a("v-dialog",{attrs:{"max-width":"80%",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.item.id?a("ModulShow",{attrs:{id:t.item.id}}):t._e()],1)],1)}),[],!1,null,null,null).exports,w={components:{DataTable:r.Z,ModulForm:m,ModulShow:g,GridList:O},data:function(){return{dialog:!1,pic:null,tab:null,datatable:{ref:"table",btnShow:!0,clickable:!0,formData:!0,moduleName:"Peminjaman Buku",slots:["status","image"],headers:[{text:"",value:"image"},{text:"Buku",value:"buku.title"},{text:"Peminjam",value:"peserta_didik.nama"},{text:"Tanggal",value:"tanggal"},{text:"Kembali",value:"tanggal_kembali"},{text:"Status",value:"status"},{text:"Actions",value:"actions",align:"center",sortable:!1}],params:{with:["pesertaDidik","buku"]}}}},watch:{"$route.query.buku_id":{handler:function(t){var e=this;setTimeout((function(){t&&(e.$refs.table.dialog=!0,e.$refs.table.editedItem.buku_id=parseInt(e.$route.query.buku_id))}),500)},deep:!0,immediate:!0}},methods:{openPic:function(t){this.dialog=!0,this.pic=t},cancel:function(){this.dialog=!1}}};const j=(0,d.Z)(w,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{elevation:"2"}},[a("DataTable",t._b({scopedSlots:t._u([{key:"modal-form",fn:function(t){var e=t.editedItem,r=t.save,i=t.dialog;return[a("ModulForm",{attrs:{form:e,dialog:i},on:{save:r}})]}},{key:"modal-show",fn:function(e){var r=e.editedItem;return[r.id?a("ModulShow",{attrs:{id:r.id}}):t._e()]}},{key:"image",fn:function(e){var r=e.item;return[a("v-btn",{attrs:{icon:""}},[a("v-list-item-avatar",[a("v-dialog",{attrs:{"max-width":"30%"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-img",{attrs:{src:t.pic,alt:"",contain:""}})],1)],1),t._v(" "),a("img",{attrs:{width:"90",src:r.buku.image_link,alt:"image",contain:""},on:{click:function(e){return t.openPic(r.buku.image_link)}}})],1)],1)]}},{key:"status",fn:function(e){var r=e.item;return[a("v-btn",{attrs:{rounded:"","x-small":"",color:"Dikembalikan"==r.status?"success":"blue-grey",dark:""}},["Hilang"==r.status?a("v-icon",{attrs:{dark:"",left:""}},[t._v("\n          mdi-minus-circle\n        ")]):t._e(),t._v("\n        "+t._s(r.status||"Masa Pinjam")+"\n        "),"Dikembalikan"==r.status?a("v-icon",{attrs:{dark:"",right:""}},[t._v("\n          mdi-checkbox-marked-circle\n        ")]):t._e()],1)]}}])},"DataTable",t.datatable,!1))],1)}),[],!1,null,null,null).exports}}]);