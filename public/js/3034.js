"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3034],{78649:(t,e,r)=>{r.d(e,{Z:()=>i});var n=r(23645),a=r.n(n)()((function(t){return t[1]}));a.push([t.id,".clickable:hover{cursor:pointer}",""]);const i=a},36865:(t,e,r)=>{r.d(e,{Z:()=>l});const n={props:["items"],data:function(){return{search:"",loading:!1,selection:[]}},methods:{reserve:function(t){this.$router.push({path:"peminjaman-buku",query:{buku_id:t.id}})}},computed:{filteredData:function(){var t=this;return this.search?this.items.filter((function(e){return e.title.toLowerCase().includes(t.search)})):this.items}}};var a=r(93379),i=r.n(a),o=r(78649),s={insert:"head",singleton:!1};i()(o.Z,s);o.Z.locals;const l=(0,r(51900).Z)(n,(function(){var t=this,e=t._self._c;return e("div",[e("v-row",{staticClass:"mx-2"},[e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("v-text-field",{staticClass:"mr-2",attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1),t._v(" "),t.filteredData.length?e("v-row",{staticClass:"ma-2"},t._l(t.filteredData,(function(r,n){return e("v-col",{key:n,attrs:{cols:"12",sm:"12",md:"3"}},[e("v-card",{attrs:{loading:t.loading}},[e("template",{slot:"progress"},[e("v-progress-linear",{attrs:{color:"deep-purple",height:"10",indeterminate:""}})],1),t._v(" "),e("v-img",{staticClass:"clickable",attrs:{height:"250",src:r.image_link},on:{click:function(e){return t.$emit("click",r)}}}),t._v(" "),e("v-card-title",{class:{subheading:t.$vuetify.breakpoint.xs}},[t._v(t._s(r.title))]),t._v(" "),e("v-card-text",[e("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[e("div",{staticClass:"text-subtitle-1"},[t._v("\n              "+t._s(r.author)+" • "+t._s(r.tahun)+" • "+t._s(r.penerbit)+"\n            ")])]),t._v(" "),e("div",{staticClass:"my-4 text-subtitle-1"},[r.tags&&r.tags.length?t._l(r.tags,(function(r,n){return e("span",{key:n,staticClass:"grey--text"},[t._v("#"+t._s(r)+",\n              ")])})):e("span",{staticClass:"grey--text"},[t._v(" #no-tags")])],2)],1),t._v(" "),e("v-divider",{staticClass:"mx-4"}),t._v(" "),e("v-card-actions",[e("v-btn",{staticClass:"white--text",attrs:{disabled:!r.stock,depressed:"",small:"",color:"green"},on:{click:function(e){return t.reserve(r)}}},[e("v-icon",[t._v("shopping_bag")]),t._v("\n            Pinjam\n          ")],1),t._v(" "),e("v-spacer"),t._v(" "),e("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(n){var a=n.on,i=n.attrs;return[e("v-chip",t._g(t._b({attrs:{color:r.stock?"info":"warning",small:""}},"v-chip",i,!1),a),[t._v("\n                "+t._s(r.stock||0)+"\n                "),e("v-icon",{attrs:{small:"",right:""}},[t._v("book")])],1)]}}],null,!0)},[t._v(" "),e("span",[t._v(t._s(r.stock?"Tersedia ".concat(r.stock," buku"):"Buku Kosong"))])])],1)],2)],1)})),1):e("div",{staticClass:"text-center mt-2"},[e("img",{attrs:{width:"500",src:"/images/empty.png"}}),t._v(" "),e("h3",{staticClass:"mb-3 grey--text"},[t._v("Tidak ada data")])]),t._v(" "),e("div",{staticClass:"text-center"},[e("v-container",[e("v-row",{attrs:{justify:"center"}},[e("v-col",{attrs:{cols:"8"}},[e("v-container",{staticClass:"max-width"},[e("v-pagination",{staticClass:"my-4",attrs:{length:t.$store.state.base.options.last_page},model:{value:t.$store.state.base.options.current_page,callback:function(e){t.$set(t.$store.state.base.options,"current_page",e)},expression:"$store.state.base.options.current_page"}})],1)],1)],1)],1)],1)],1)}),[],!1,null,null,null).exports},43034:(t,e,r)=>{r.r(e),r.d(e,{default:()=>P});var n=r(47130),a=r(20629),i=r(69074),o=r(19934);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const m={props:["form","dialog"],components:{BarqunDatePicker:i.Z,BarqunVSelect:o.Z},data:function(){return{}},methods:c(c({},(0,a.OI)("base",["CLEAR_ERRORS"])),{},{handleFileUpload:function(t){this.form["file_"+t]=this.$refs[t].getFiles().length?this.$refs[t].getFiles()[0].file:null},getFiles:function(t){return this.form.id&&this.form[t]?["/storage/uploads/foto/"+this.form[t]]:""},setDates:function(){this.form.id||(this.$set(this.form,"tanggal",new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)),this.$set(this.form,"tanggal_kembali",new Date((new Date).setDate((new Date).getDate()+3)-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10)))}}),created:function(){this.setDates()},watch:{dialog:function(t){t&&this.CLEAR_ERRORS(),this.setDates()}},computed:c(c({},(0,a.rn)("base",["errors"])),(0,a.rn)("auth",["user"]))};var d=r(51900);const f=(0,d.Z)(m,(function(){var t=this,e=t._self._c;return e("div",[t._.isEmpty(t.errors)?t._e():e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("v-alert",{attrs:{border:"top",color:"red lighten-2",dark:""}},[e("ul",t._l(t.errors,(function(r){return e("li",{key:r[0]},[t._v(t._s(r[0]))])})),0)])],1)],1),t._v(" "),e("v-row",[e("v-col",{attrs:{cols:"2",sm:"12",md:"6"}},[e("BarqunVSelect",{attrs:{autocomplete:"",clearable:"",name:"buku_id",form:t.form,itemValue:"id",itemText:function(t){return"".concat(t.kode||""," ").concat(t.title)},url:"buku?stock=ready".concat(this.form.id?"&edit=true":""),label:"Buku"}})],1),t._v(" "),t.userRole("peserta-didik",!1)?e("v-col",{attrs:{cols:"2",sm:"12",md:"6"}},[e("BarqunVSelect",{attrs:{autocomplete:"",clearable:"",name:"peserta_didik_id",form:t.form,itemValue:"id",itemText:function(t){return"".concat(t.nisn||""," ").concat(t.nama)},url:"peserta-didik",label:"Peserta Didik"}})],1):t._e(),t._v(" "),e("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[e("BarqunDatePicker",{attrs:{label:"Tanggal Pinjam",field:"tanggal",form:t.form,required:""}})],1),t._v(" "),e("v-col",{attrs:{cols:"12",sm:"12",md:"6"}},[e("BarqunDatePicker",{attrs:{label:"Tanggal Kembali",field:"tanggal_kembali",form:t.form,required:""}})],1),t._v(" "),e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("v-textarea",{attrs:{label:"Keterangan"},model:{value:t.form.keterangan,callback:function(e){t.$set(t.form,"keterangan",e)},expression:"form.keterangan"}})],1),t._v(" "),e("v-divider"),t._v(" "),t.form.id?e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("v-select",{attrs:{label:"Status Peminjaman",items:["Dikembalikan","Hilang"],outlined:""},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1):t._e()],1)],1)}),[],!1,null,null,null).exports;function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==v(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===v(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const h={props:["id"],data:function(){return{search:"",headers:[]}},mounted:function(){this.load()},computed:b(b({},(0,a.rn)("base",["loading","item"])),{},{filteredItem:function(){return this._.difference(Object.keys(this.item),["id","deskripsi","image","image_link","peminjaman","created_at","updated_at"])}}),watch:{id:function(){this.load()}},methods:b(b({},(0,a.nv)("base",["getData"])),{},{load:function(){this.getData({customUrl:"buku",id:this.id||this.$route.params.id,params:{with:["peminjaman.pesertaDidik"]}})}})};const _=(0,d.Z)(h,(function(){var t=this,e=t._self._c;return e("div",[e("v-card",{attrs:{loading:t.loading}},[e("v-card-title",{staticClass:"sticky blue white--text",attrs:{"primary-title":""}},[t._v("\n      Detail Buku\n      "),e("v-spacer")],1),t._v(" "),e("v-divider"),t._v(" "),e("div",{staticClass:"pa-5"},[e("v-row",[e("v-col",{attrs:{cols:"12",sm:"12",md:"4"}},[e("v-img",{attrs:{width:"400",src:t.item.image_link}})],1),t._v(" "),e("v-col",{attrs:{cols:"12",sm:"12",md:"8"}},[e("v-card-title",{staticClass:"blue white--text",attrs:{"primary-title":""}},[t._v("\n            Data Buku\n          ")]),t._v(" "),t._.isEmpty(t.item)?t._e():e("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[e("tbody",t._l(t.filteredItem,(function(r,n){return e("tr",{key:n},[e("td",{attrs:{width:"10"}},[t._v(t._s(t._.startCase(r)))]),t._v(" "),e("td",{attrs:{width:"10"}},[t._v(":")]),t._v(" "),e("td",[t._v(t._s(t.item[r]))])])})),0)]},proxy:!0}],null,!1,3052676482)})],1),t._v(" "),t.item.deskripsi?e("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[e("h3",[t._v("Deskipsi :")]),t._v(" "),e("p",{attrs:{align:"justify"}},[t._v(t._s(t.item.deskripsi))])]):t._e()],1)],1)],1)],1)}),[],!1,null,null,null).exports;function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return(e=function(t){var e=function(t,e){if("object"!==y(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===y(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const j={data:function(){return{item:{},dialog:!1}},components:{CardGrid:r(36865).Z,ModulShow:_},created:function(){this.$store.commit("base/SET_MODULE_NAME","Buku"),this.getData()},computed:w({},(0,a.rn)("base",["items"])),methods:w(w({},(0,a.nv)("base",["getData"])),{},{clicked:function(t){this.item=t,this.dialog=!0}})};const S=(0,d.Z)(j,(function(){var t=this,e=t._self._c;return e("div",[e("CardGrid",{attrs:{items:t.items},on:{click:t.clicked}}),t._v(" "),e("v-dialog",{attrs:{"max-width":"80%",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.item.id?e("ModulShow",{attrs:{id:t.item.id}}):t._e()],1)],1)}),[],!1,null,null,null).exports,D={components:{DataTable:n.Z,ModulForm:f,ModulShow:_,GridList:S},data:function(){return{dialog:!1,pic:null,tab:null,datatable:{ref:"table",btnShow:!0,clickable:!0,formData:!0,moduleName:"Peminjaman Buku",slots:["status","image"],headers:[{text:"",value:"image"},{text:"Buku",value:"buku.title"},{text:"Peminjam",value:"peserta_didik.nama"},{text:"Tanggal",value:"tanggal"},{text:"Kembali",value:"tanggal_kembali"},{text:"Status",value:"status"},{text:"Actions",value:"actions",align:"center",sortable:!1}],params:{with:["pesertaDidik","buku"]}}}},watch:{"$route.query.buku_id":{handler:function(t){var e=this;setTimeout((function(){t&&(e.$refs.table.dialog=!0,e.$refs.table.editedItem.buku_id=parseInt(e.$route.query.buku_id))}),500)},deep:!0,immediate:!0}},methods:{openPic:function(t){this.dialog=!0,this.pic=t},cancel:function(){this.dialog=!1}}};const P=(0,d.Z)(D,(function(){var t=this,e=t._self._c;return e("v-card",{attrs:{elevation:"2"}},[e("DataTable",t._b({scopedSlots:t._u([{key:"modal-form",fn:function(t){var r=t.editedItem,n=t.save,a=t.dialog;return[e("ModulForm",{attrs:{form:r,dialog:a},on:{save:n}})]}},{key:"modal-show",fn:function(r){var n=r.editedItem;return[n.id?e("ModulShow",{attrs:{id:n.id}}):t._e()]}},{key:"image",fn:function(r){var n=r.item;return[e("v-btn",{attrs:{icon:""}},[e("v-list-item-avatar",[e("v-dialog",{attrs:{"max-width":"30%"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e("v-card",[e("v-img",{attrs:{src:t.pic,alt:"",contain:""}})],1)],1),t._v(" "),e("img",{attrs:{width:"90",src:n.buku.image_link,alt:"image",contain:""},on:{click:function(e){return t.openPic(n.buku.image_link)}}})],1)],1)]}},{key:"status",fn:function(r){var n=r.item;return[e("v-btn",{attrs:{rounded:"","x-small":"",color:"Dikembalikan"==n.status?"success":"blue-grey",dark:""}},["Hilang"==n.status?e("v-icon",{attrs:{dark:"",left:""}},[t._v("\n          mdi-minus-circle\n        ")]):t._e(),t._v("\n        "+t._s(n.status||"Masa Pinjam")+"\n        "),"Dikembalikan"==n.status?e("v-icon",{attrs:{dark:"",right:""}},[t._v("\n          mdi-checkbox-marked-circle\n        ")]):t._e()],1)]}}])},"DataTable",t.datatable,!1))],1)}),[],!1,null,null,null).exports}}]);