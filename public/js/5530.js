"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5530],{44206:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(23645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,"table th[data-v-57f39d42]{border-right:1px solid #ddd;border-top:1px solid #ddd}table td+td[data-v-57f39d42],table th[data-v-57f39d42]{border-left:1px solid #ddd}.no-decoration[data-v-57f39d42]{text-decoration:none}",""]);const s=r},34122:(t,e,a)=>{a.d(e,{Z:()=>r});const n={props:["form","name","label"],data:function(){return{time:null,menu2:!1,modal2:!1}},methods:{changeHandle:function(t){this.$emit("input",t)}}};const r=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.form[t.name],transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.form,t.name,e)},"update:return-value":function(e){return t.$set(t.form,t.name,e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:t.label,"prepend-icon":"mdi-clock-time-four-outline",readonly:""},on:{change:t.changeHandle},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._t("append-outer")]},proxy:!0}],null,!0),model:{value:t.form[t.name],callback:function(e){t.$set(t.form,t.name,e)},expression:"form[name]"}},"v-text-field",Object.assign({},r,t.$attrs),!1),n))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),t.menu2?a("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(e){return t.$refs.menu.save(t.form[t.name])}},model:{value:t.form[t.name],callback:function(e){t.$set(t.form,t.name,e)},expression:"form[name]"}}):t._e()],1)}),[],!1,null,null,null).exports},15530:(t,e,a)=>{a.r(e),a.d(e,{default:()=>$});var n=a(87757),r=a.n(n),s=a(39922),i=a(32782),o=a(80001);function l(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(n,r)}const c={props:["params","search"],data:function(){return{data:[],items:[{id:1,nisn:"1415015081",nama:"Bayu",jenis_kelamin:"L",kehadiran:{1:"H",2:"H",3:"H",4:"I",5:"A",6:"H",7:"H"}},{id:2,nisn:"0532521",nama:"Nur",jenis_kelamin:"P",kehadiran:{1:"H",2:"H",3:"H",4:"H",5:"H",6:"I",7:"I"}}]}},created:function(){this.load()},methods:{load:function(){var t,e=this;return(t=r().mark((function t(){var a,n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("peserta-didik",{params:{all:!0,with:["absensi"],sortby:"nama",sortbydesc:"asc",kelas_id:e.params.kelas_id,tahun_ajaran_id:e.params.tahun_ajaran_id,bulan_absensi:e.params.bulan||"".concat((new Date).getFullYear(),"-").concat((new Date).getUTCMonth()+1)}});case 2:a=t.sent,n=a.data,console.log(n),e.items=_.chain(n).map((function(t){return t.kehadiran=_.mapKeys(t.absensi,(function(t){return parseInt(t.day)})),t})).value(),console.log(e.items);case 7:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){l(s,n,r,i,o,"next",t)}function o(t){l(s,n,r,i,o,"throw",t)}i(void 0)}))})()}},watch:{"params.bulan":function(){this.load()}},computed:{filteredItems:function(){var t=this;return this.search?this.items.filter((function(e){return e.nama.toLowerCase().includes(t.search)||e.nisn.toLowerCase().includes(t.search)})):this.items}}};var u=a(93379),m=a.n(u),d=a(44206),p={insert:"head",singleton:!1};m()(d.Z,p);d.Z.locals;var f=a(51900);const v=(0,f.Z)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("v-simple-table",{staticClass:"bordered",attrs:{"fixed-header":"",height:"600px",dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-center pa-0 ma-0",attrs:{colspan:"2"}},[t._v("Nomor")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{rowspan:"2"}},[t._v("Nama Siswa")]),t._v(" "),a("th",{staticClass:"text-center pa-0 ma-0",attrs:{rowspan:"2"}},[t._v("L/P")]),t._v(" "),a("th",{staticClass:"text-center pa-0 ma-0",attrs:{colspan:t.$moment().daysInMonth()}},[t._v("\n            Bulan "+t._s(t.$moment().locale("id_ID").format("MMMM YYYY"))+"\n          ")])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center pa-0 ma-0"},[t._v("URUT")]),t._v(" "),a("th",{staticClass:"text-center pa-0 ma-0"},[t._v("NIS/NISN")]),t._v(" "),t._l(t.$moment().daysInMonth(),(function(e,n){return a("th",{key:n,staticClass:"text-center pa-0 ma-0"},[t._v("\n            "+t._s(e)+"\n          ")])}))],2)]),t._v(" "),a("tbody",t._l(t.filteredItems,(function(e,n){return a("tr",{key:e.id},[a("td",{staticClass:"text-center pa-0 ma-0"},[t._v(t._s(n+1))]),t._v(" "),a("td",{staticClass:"text-center pa-1 ma-1",attrs:{width:"10"}},[t._v(t._s(e.nisn))]),t._v(" "),a("td",{staticClass:"text-center pa-1 ma-1",attrs:{width:"10"}},[t._v(t._s(e.nama))]),t._v(" "),a("td",{staticClass:"text-center pa-0 ma-0"},[t._v(t._s(e.jenis_kelamin))]),t._v(" "),t._l(t.$moment().daysInMonth(),(function(n,r){return a("td",{key:r,staticClass:"text-center pa-0 ma-0"},[t._v("\n            "+t._s(e.kehadiran[n]&&e.kehadiran[n].alias||"-")+"\n          ")])}))],2)})),0)]},proxy:!0}])})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center mt-3 mb-2"},[a("h3",[t._v("Absensi Peserta Didik")])])}],!1,null,"57f39d42",null).exports;var h=a(20629),b=a(8093),k=a(34122),w=a(36553);function y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?y(Object(a),!0).forEach((function(e){x(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function x(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const j={props:["form","dialog"],components:{BarqunDatePicker:b.Z,BarqunVSelect:s.Z,BarqunTimePicker:k.Z,TextField:w.Z},data:function(){return{hari:["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],standby:!1,waktu_item:[{}]}},methods:g(g({},(0,h.OI)("base",["CLEAR_ERRORS","SET_STANDBY"])),{},{init:function(){this.waktu_item=[{}]},tambahJam:function(){var t=this.waktu_item[this.waktu_item.length-1];this.waktu_item.push({mata_pelajaran_id:t.mata_pelajaran_id,hari:t.hari,jam_ke:parseInt(t.jam_ke)+1||1,waktu_mulai:t.waktu_selesai})}}),mounted:function(){this.init()},watch:{dialog:function(t){t&&(this.CLEAR_ERRORS(),this.init())},waktu_item:function(t){this.form.waktu=t}},computed:g(g({},(0,h.rn)("base",["errors"])),{},{alert:function(){return!_.isEmpty(this.errors)}})};const S=(0,f.Z)(j,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.alert?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-alert",{attrs:{border:"top",color:"red lighten-2",dark:""}},[a("ul",t._l(t.errors,(function(e){return a("li",{key:e[0]},[t._v(t._s(e[0]))])})),0)])],1)],1):t._e(),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-switch",{attrs:{label:"Standby"},on:{change:t.SET_STANDBY},model:{value:t.standby,callback:function(e){t.standby=e},expression:"standby"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("BarqunVSelect",{attrs:{autocomplete:"",name:"kelas_id",form:t.form,url:"rombel-tahun-ajaran",itemValue:"id",itemText:"kelas",label:"Kelas",required:"",dense:""}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("BarqunVSelect",{attrs:{autocomplete:"",name:"ruang_id",form:t.form,url:"prasarana?label=kelas",itemValue:"id",itemText:"nama",label:"Ruang",required:"",dense:""}})],1),t._v(" "),a("v-col",{staticClass:"m-0 p-0",attrs:{cols:"12",sm:"9",md:"9"}},[a("b",[t._v("Waktu Pembelajaran")])]),t._v(" "),a("v-col",{staticClass:"text-right m-0 p-0",attrs:{cols:"12",sm:"3",md:"3"}},[a("v-btn",{attrs:{color:"success",small:""},on:{click:t.tambahJam}},[a("v-icon",[t._v("add")]),t._v(" Add\n      ")],1),t._v(" "),a("v-btn",{attrs:{color:"warning",small:""},on:{click:t.init}},[a("v-icon",[t._v("refresh")]),t._v(" Reset\n      ")],1)],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-virtual-scroll",{attrs:{items:t.waktu_item,height:"300","item-height":"64"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[a("v-row",{staticClass:"mt-2"},[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("BarqunVSelect",{attrs:{autocomplete:"",name:"mata_pelajaran_id",form:n,url:"mata-pelajaran",itemValue:"id",itemText:"nama",label:"Mata Pelajaran",required:"",dense:""}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[a("BarqunVSelect",{attrs:{name:"hari",form:n,items:t.hari,label:"Hari",required:"",dense:""}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[a("TextField",{attrs:{label:"Jam Ke",type:"number",form:n,name:"jam_ke",required:"",dense:""}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[a("BarqunTimePicker",{attrs:{dense:"",form:n,label:"Jam Mulai",name:"waktu_mulai"}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"6",md:"2"}},[a("BarqunTimePicker",{attrs:{dense:"",form:n,label:"Jam Selesai",name:"waktu_selesai"},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t.waktu_item.length>1?a("v-btn",{attrs:{color:"warning",icon:""},on:{click:function(e){return t.waktu_item.splice(t.k,1)}}},[a("v-icon",[t._v("delete")])],1):t._e()]},proxy:!0}],null,!0)})],1)],1),t._v(" "),a("v-divider")]}}])})],1)],1)],1)}),[],!1,null,null,null).exports;function C(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return P(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function T(t,e,a,n,r,s,i){try{var o=t[s](i),l=o.value}catch(t){return void a(t)}o.done?e(l):Promise.resolve(l).then(n,r)}const O={components:{DataTable:o.Z,ModulForm:S,Ringkasan:v,BarqunVSelect:s.Z,BarqunMonthPicker:i.Z},data:function(){return{loading:!1,form:{search:""},params:{bulan:this.$moment(new Date).format("YYYY-MM")}}},methods:{load:function(){var t,e=this;return(t=r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.params.kelas_id&&!e.params.tahun_ajaran_id){t.next=4;break}return e.loading=!0,t.next=4,setTimeout((function(){e.$refs.ringkasan.load(),e.loading=!1}),500);case 4:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(t){T(s,n,r,i,o,"next",t)}function o(t){T(s,n,r,i,o,"throw",t)}i(void 0)}))})()},printNewTab:function(){var t="/print/report-absensi-siswa?kelas_id=".concat(this.params.kelas_id,"&tahun_ajaran_id=").concat(this.params.tahun_ajaran_id,"&bulan_absensi=").concat(this.params.bulan,"&");window.open(t)},download:function(){var t="/print/report-absensi-siswa?kelas_id=".concat(this.params.kelas_id,"&tahun_ajaran_id=").concat(this.params.tahun_ajaran_id,"&bulan_absensi=").concat(this.params.bulan,"&export=excel");window.open(t)},printStyle:function(){for(var t=document.getElementById("print").innerHTML,e="",a=0,n=C(document.querySelectorAll('link[rel="stylesheet"], style'));a<n.length;a++){e+=n[a].outerHTML}var r=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");r.document.write("<!DOCTYPE html>\n<html>\n  <head>\n    ".concat(e,"\n  </head>\n  <body>\n    ").concat(t,"\n  </body>\n</html>")),r.document.close(),r.focus(),r.print()},print:function(){var t=document.getElementById("print"),e=window.open("","","left=0,top=0,width=800,height=900,toolbar=0,scrollbars=0,status=0");e.document.write(t.innerHTML),e.document.close(),e.focus(),e.print()}},computed:{isDisabled:function(){return!this.params.kelas_id||!this.params.tahun_ajaran_id}}};const $=(0,f.Z)(O,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{elevation:"5",loading:t.loading}},[a("v-card-title",{attrs:{"primary-title":""}},[t._v(" Daftar Absensi Peserta Didik ")]),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("BarqunVSelect",{staticClass:"mr-3",attrs:{outlined:"",autocomplete:"",name:"tahun_ajaran_id",form:t.params,url:"tahun-ajaran",itemValue:"id",itemText:"tahun_ajaran",label:"Tahun Ajaran",dense:"",clearable:""},on:{input:t.load}}),t._v(" "),a("BarqunVSelect",{staticClass:"mr-2",attrs:{outlined:"",autocomplete:"",name:"kelas_id",form:t.params,url:"rombel-tahun-ajaran?with[]=tahunAjaran",itemValue:"id",itemText:function(t){return t.kelas+" ("+t.tahun_ajaran.tahun_ajaran+")"},label:"Kelas",dense:""},on:{input:t.load}}),t._v(" "),a("v-spacer"),t._v(" "),a("BarqunMonthPicker",{attrs:{label:"Periode",name:"bulan",form:t.params}}),t._v(" "),a("v-btn",{staticClass:"ml-2 mb-2",attrs:{outlined:"",small:"",color:"primary"},on:{click:t.load}},[a("v-icon",[t._v("cached")])],1)],1),t._v(" "),a("v-card-actions",[a("v-text-field",{staticClass:"mb-2",attrs:{dense:"",outlined:"","append-icon":"mdi-magnify",label:"Cari Nama/NISN Siswa","single-line":"","hide-details":""},model:{value:t.form.search,callback:function(e){t.$set(t.form,"search",e)},expression:"form.search"}}),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"ml-2 mb-2 white--text",attrs:{disabled:t.isDisabled,color:"green"},on:{click:t.download}},[a("v-icon",[t._v("mdi-microsoft-excel")]),t._v(" Download\n    ")],1),t._v(" "),a("v-btn",{staticClass:"ml-2 mb-2 white--text",attrs:{disabled:t.isDisabled,color:"blue"},on:{click:t.printNewTab}},[a("v-icon",[t._v("mdi-printer")]),t._v(" Print\n    ")],1)],1),t._v(" "),a("hr"),t._v(" "),t.params.kelas_id||t.params.tahun_ajaran_id?a("Ringkasan",{ref:"ringkasan",attrs:{id:"print",params:t.params,search:t.form.search}}):t._e()],1)}),[],!1,null,null,null).exports}}]);