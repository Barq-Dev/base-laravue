"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5315],{37049:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(23645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,"table th[data-v-16c68e80]{border-right:1px solid #ddd;border-top:1px solid #ddd}table td+td[data-v-16c68e80],table th[data-v-16c68e80]{border-left:1px solid #ddd}.no-decoration[data-v-16c68e80]{text-decoration:none}.text-updown[data-v-16c68e80]{text-align:center;text-orientation:upright;-ms-writing-mode:tb-rl;writing-mode:vertical-rl}",""]);const s=r},54022:(t,e,a)=>{a.d(e,{Z:()=>s});var n=a(23645),r=a.n(n)()((function(t){return t[1]}));r.push([t.id,".scroll{height:300px;max-height:300px;overflow-y:scroll}",""]);const s=r},34122:(t,e,a)=>{a.d(e,{Z:()=>r});const n={props:["form","name","label"],data:function(){return{time:null,menu2:!1,modal2:!1}},methods:{changeHandle:function(t){this.$emit("input",t)}}};const r=(0,a(51900).Z)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.form[t.name],transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.form,t.name,e)},"update:return-value":function(e){return t.$set(t.form,t.name,e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{label:t.label,"prepend-icon":"mdi-clock-time-four-outline",readonly:""},on:{change:t.changeHandle},scopedSlots:t._u([{key:"append-outer",fn:function(){return[t._t("append-outer")]},proxy:!0}],null,!0),model:{value:t.form[t.name],callback:function(e){t.$set(t.form,t.name,e)},expression:"form[name]"}},"v-text-field",Object.assign({},r,t.$attrs),!1),n))]}}]),model:{value:t.menu2,callback:function(e){t.menu2=e},expression:"menu2"}},[t._v(" "),t.menu2?a("v-time-picker",{attrs:{"full-width":""},on:{"click:minute":function(e){return t.$refs.menu.save(t.form[t.name])}},model:{value:t.form[t.name],callback:function(e){t.$set(t.form,t.name,e)},expression:"form[name]"}}):t._e()],1)}),[],!1,null,null,null).exports},5315:(t,e,a)=>{a.r(e),a.d(e,{default:()=>T});var n=a(39922),r=a(80001),s=a(87757),l=a.n(s);function i(t,e,a,n,r,s,l){try{var i=t[s](l),o=i.value}catch(t){return void a(t)}i.done?e(o):Promise.resolve(o).then(n,r)}const o={props:["params"],data:function(){return{data:[],kelas:["Kelas X TKRO","Kelas X TKJ","Kelas X OTKP","Kelas XI TKRO","Kelas XI TKJ","Kelas XI OTKP","Kelas XII TKRO","Kelas XII TKJ","Kelas XII OTKP"],hari:["Senin","Selasa","Rabu","Kamis","Jumat"]}},mounted:function(){this.load()},methods:{load:function(){var t,e=this;return(t=l().mark((function t(){var a,n;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("jadwal-pembelajaran",{params:{all:!0,hasJadwal:!0,sortby:"jam_ke",sortbydesc:"asc",with:["kelas","mataPelajaran","guruMapel"],ruang_id:e.params.ruang_id}});case 2:a=t.sent,n=a.data,e.data=_.chain(n).orderBy(["jam_ke"]).groupBy("hari").map((function(t){return _.chain(t).groupBy("jam_ke").map((function(t){return t.jam_ke=t[0].jam_ke,t[0].hari&&(t.upacara=t.find((function(t){return null==t.kelas_id}))),e.kelas.forEach((function(e){t[e]=t.find((function(t){return t.kelas&&t.kelas.kelas==e}))})),t})).value()})).mapKeys((function(t,e){return t[0][0].hari})).value(),console.log(e.data);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function l(t){i(s,n,r,l,o,"next",t)}function o(t){i(s,n,r,l,o,"throw",t)}l(void 0)}))})()}},watch:{"params.ruang_id":function(){this.load()}}};var u=a(93379),c=a.n(u),m=a(37049),d={insert:"head",singleton:!1};c()(m.Z,d);m.Z.locals;var v=a(51900);const h=(0,v.Z)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("v-simple-table",{staticClass:"bordered",attrs:{"fixed-header":"",height:"600px",dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{rowspan:"3"}},[t._v("Hari")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{rowspan:"3"}},[t._v("Jam Ke")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{rowspan:"3"}},[t._v("Waktu")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{colspan:"9"}},[t._v("Kelas")])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center",attrs:{colspan:"3"}},[t._v("X")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{colspan:"3"}},[t._v("XI")]),t._v(" "),a("th",{staticClass:"text-center",attrs:{colspan:"3"}},[t._v("XII")])]),t._v(" "),a("tr",[a("th",{staticClass:"text-center"},[t._v("TKRO")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("TKJ")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("OTKR")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("TKRO")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("TKJ")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("OTKR")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("TKRO")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("TKJ")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("OTKR")])])]),t._v(" "),a("tbody",[t._l(t.hari,(function(e){return[t._l(t.data[e],(function(n,r){return[2==r?a("tr",{key:e+"_"+r+"_ishoma1"},[a("td",{staticClass:"text-center",attrs:{width:"10"}}),t._v(" "),a("td",{staticClass:"text-center",attrs:{width:"10"}},[t._v("09:00-09:30")]),t._v(" "),a("td",{staticClass:"blue text-center white--text",attrs:{colspan:"9"}},[a("b",[t._v("Istirahat & Sholat")])])]):t._e(),t._v(" "),5==r?a("tr",{key:e+"_"+r+"_ishoma2"},[a("td",{staticClass:"text-center",attrs:{width:"10"}}),t._v(" "),a("td",{staticClass:"text-center",attrs:{width:"10"}},[t._v("12:30-13:45")]),t._v(" "),a("td",{staticClass:"blue text-center white--text",attrs:{colspan:"9"}},[a("b",[t._v("Istirahat & Sholat")])])]):t._e(),t._v(" "),a("tr",{key:e+"_"+r},[0==r?a("td",{staticClass:"font-weight-bold text-updown",attrs:{width:"10",rowspan:t.data[e].length+(t.data[e].length>5?2:1)}},[t._v("\n                "+t._s(n[0].hari.toUpperCase())+"\n              ")]):t._e(),t._v(" "),a("td",{staticClass:"text-center",attrs:{width:"10"}},[t._v(t._s(n[0].jam_ke))]),t._v(" "),a("td",{staticClass:"text-center",attrs:{width:"10"}},[t._v("\n                "+t._s(t.$moment(n[0].waktu_mulai,"h:mm").format("hh:mm")+"-\n              "+t.$moment(n[0].waktu_selesai,"h:mm").format("hh:mm"))+"\n              ")]),t._v(" "),n.upacara?a("td",{staticClass:"text-center",attrs:{colspan:"9"}},[a("b",[t._v(t._s(n.upacara&&n.upacara.mata_pelajaran.nama))])]):t._l(t.kelas,(function(e,r){return a("td",{key:r,staticClass:"text-center"},[t._v("\n                  "+t._s(n[e]&&n[e].guru_mapel.kode)+"\n                ")])}))],2)]}))]}))],2)]},proxy:!0}])})],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center mt-3 mb-2"},[a("h3",[t._v("Jadwal Pembelajaran")])])}],!1,null,"16c68e80",null).exports;var p=a(20629),f=a(8093),b=a(34122),k=a(36553);function g(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function w(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?g(Object(a),!0).forEach((function(e){x(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function x(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const y={props:["form","dialog"],components:{BarqunDatePicker:f.Z,BarqunVSelect:n.Z,BarqunTimePicker:b.Z,TextField:k.Z},data:function(){return{hari:["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],standby:!1,semuaKelas:!1,waktu_item:[]}},methods:w(w({},(0,p.OI)("base",["SET_STANDBY"])),{},{init:function(){this.setData()},setData:function(){this.form.id?this.waktu_item.push(w({guru_mapel_id:this.form.guru_mapel.id},this.form)):this.waktu_item=[{}]},tambahJam:function(){var t=this,e=this.waktu_item[this.waktu_item.length-1];this.waktu_item.push({guru_mapel:e.guru_mapel,guru_mapel_id:e.guru_mapel&&e.guru_mapel.id,mata_pelajaran_id:e.guru_mapel&&e.guru_mapel.mata_pelajaran_id,hari:e.hari,jam_ke:parseInt(e.jam_ke)+1||1,waktu_mulai:e.waktu_selesai,waktu_selesai:e.waktu_selesai?this.$moment(e.waktu_selesai,"h:mm").add(1,"hours").format("hh:mm"):null}),setTimeout((function(){return document.getElementById("item_".concat(t.waktu_item.length-1)).scrollIntoView({behavior:"smooth"})}),250)},addHour:function(t,e){this.$set(this.waktu_item[t],"waktu_selesai",this.$moment(e,"h:mm").add(1,"hours").format("hh:mm"))}}),mounted:function(){this.init()},watch:{dialog:function(t){t&&this.init(),t||(this.waktu_item=[])},waktu_item:function(t){this.form.waktu=t}},computed:w(w({},(0,p.rn)("base",["errors"])),{},{alert:function(){return!_.isEmpty(this.errors)}})};var j=a(54022),K={insert:"head",singleton:!1};c()(j.Z,K);j.Z.locals;const C=(0,v.Z)(y,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.alert?a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-alert",{attrs:{border:"top",color:"red lighten-2",dark:""}},[a("ul",t._l(t.errors,(function(e){return a("li",{key:e[0]},[t._v(t._s(e[0]))])})),0)])],1)],1):t._e(),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"4",sm:"4",md:"4"}},[a("v-switch",{attrs:{label:"Standby"},on:{change:t.SET_STANDBY},model:{value:t.standby,callback:function(e){t.standby=e},expression:"standby"}})],1),t._v(" "),a("v-col",{attrs:{cols:"6",sm:"6",md:"6"}},[a("v-spacer")],1),t._v(" "),a("v-col",{attrs:{cols:"2",sm:"2",md:"2"}},[a("v-switch",{attrs:{label:"Semua Kelas"},model:{value:t.semuaKelas,callback:function(e){t.semuaKelas=e},expression:"semuaKelas"}})],1),t._v(" "),t.semuaKelas?t._e():[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("BarqunVSelect",{attrs:{autocomplete:"",name:"kelas_id",form:t.form,url:"rombel-tahun-ajaran",itemValue:"id",itemText:"kelas",label:"Kelas",required:"",dense:""}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("BarqunVSelect",{attrs:{autocomplete:"",name:"ruang_id",form:t.form,url:"prasarana?label=kelas",itemValue:"id",itemText:"nama",label:"Ruang",required:"",dense:""}})],1)],t._v(" "),a("v-col",{staticClass:"m-0 p-0",attrs:{cols:"12",sm:"9",md:"9"}},[a("b",[t._v("Waktu Pembelajaran")])]),t._v(" "),t.form.id?t._e():a("v-col",{staticClass:"text-right m-0 p-0",attrs:{cols:"12",sm:"3",md:"3"}},[a("v-btn",{attrs:{color:"success",small:""},on:{click:t.tambahJam}},[a("v-icon",[t._v("add")]),t._v(" Add\n      ")],1),t._v(" "),a("v-btn",{attrs:{color:"warning",small:""},on:{click:t.init}},[a("v-icon",[t._v("refresh")]),t._v(" Reset\n      ")],1)],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("v-simple-table",{attrs:{dense:"","fixed-header":"",height:"300"},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v("Hari")]),t._v(" "),a("th",[t._v("Mata Pelajaran")]),t._v(" "),a("th",[t._v("Jam Ke")]),t._v(" "),a("th",[t._v("Jam Mulai")]),t._v(" "),a("th",[t._v("Jam Selesai")]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.waktu_item,(function(e,n){return a("tr",{key:n,attrs:{id:"item_"+n}},[a("td",{staticClass:"font-weight-bold",attrs:{width:"10"}},[t._v(t._s(n+1))]),t._v(" "),a("td",{attrs:{width:"10"}},[a("v-edit-dialog",{attrs:{light:""},scopedSlots:t._u([{key:"input",fn:function(){return[a("BarqunVSelect",{attrs:{name:"hari",form:e,items:t.hari,dense:""},on:{"input:this":function(t){return t.$parent.isActive=!1}}})]},proxy:!0}],null,!0)},[a("span",{staticClass:"font-weight-bold"},[t._v("\n                    "+t._s(e.hari||"[click]")+"\n                  ")])])],1),t._v(" "),a("td",{attrs:{width:"10"}},[a("v-edit-dialog",{attrs:{light:""},scopedSlots:t._u([{key:"input",fn:function(){return[a("BarqunVSelect",{attrs:{autocomplete:"",name:"guru_mapel",form:e,url:"guru-mapel?with[]=guru&with[]=mataPelajaran",itemValue:"id",itemText:function(t){return t.mata_pelajaran.nama+" "+(t.kode?"("+t.kode+")":"")},dense:"","return-object":""},on:{"input:this":function(t){return t.$parent.isActive=!1},input:function(t){e.guru_mapel_id=t.id,e.mata_pelajaran_id=t.mata_pelajaran_id}}})]},proxy:!0}],null,!0)},[a("span",{staticClass:"font-weight-bold"},[t._v("\n                    "+t._s(e.guru_mapel&&(e.guru_mapel.kode||e.guru_mapel.mata_pelajaran.nama)||"[click]")+"\n                  ")])])],1),t._v(" "),a("td",{attrs:{width:"10"}},[a("v-edit-dialog",{attrs:{light:""},scopedSlots:t._u([{key:"input",fn:function(){return[a("v-text-field",{attrs:{type:"number",min:"0","single-line":""},model:{value:e.jam_ke,callback:function(a){t.$set(e,"jam_ke",a)},expression:"item.jam_ke"}})]},proxy:!0}],null,!0)},[a("span",{staticClass:"font-weight-bold"},[t._v("\n                    "+t._s(e.jam_ke||"[click]")+"\n                  ")])])],1),t._v(" "),a("td",{attrs:{width:"10"}},[a("v-edit-dialog",{attrs:{light:""},scopedSlots:t._u([{key:"input",fn:function(){return[a("BarqunTimePicker",{attrs:{dense:"",form:e,name:"waktu_mulai"},on:{input:function(e){return t.addHour(n,e)}}})]},proxy:!0}],null,!0)},[a("span",{staticClass:"font-weight-bold"},[t._v("\n                    "+t._s(e.waktu_mulai||"[click]")+"\n                  ")])])],1),t._v(" "),a("td",{attrs:{width:"10"}},[a("v-edit-dialog",{attrs:{light:""},scopedSlots:t._u([{key:"input",fn:function(){return[a("BarqunTimePicker",{attrs:{dense:"",form:e,name:"waktu_selesai"}})]},proxy:!0}],null,!0)},[a("span",{staticClass:"font-weight-bold"},[t._v("\n                    "+t._s(e.waktu_selesai||"[click]")+"\n                  ")])])],1),t._v(" "),a("td",{attrs:{width:"10"}},[t.waktu_item.length>1?a("v-btn",{attrs:{color:"warning",icon:""},on:{click:function(e){return t.waktu_item.splice(n,1)}}},[a("v-icon",[t._v("delete")])],1):t._e()],1)])})),0)]},proxy:!0}])})],1)],2)],1)}),[],!1,null,null,null).exports,S={components:{DataTable:r.Z,ModulForm:C,Ringkasan:h,BarqunVSelect:n.Z},data:function(){return{moduleName:"Jadwal Pembelajaran",slots:["status"],headers:[{text:"#",value:"num"},{text:"Hari",value:"hari"},{text:"Kelas",value:"kelas.rombel.nama"},{text:"Ruang",value:"ruang.nama"},{text:"Jam Ke",value:"jam_ke"},{text:"Mata Pelajaran",value:"mata_pelajaran.nama"},{text:"Kode",value:"guru_mapel.kode"},{text:"Actions",value:"actions",align:"center",sortable:!1}],params:{with:["guru","kelas.rombel","mataPelajaran","ruang","guruMapel"]},tab:null}}};const T=(0,v.Z)(S,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{elevation:"2"}},[a("v-tabs",{attrs:{"background-color":"blue lighten-2",dark:"","slider-color":"yellow"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("v-tab",[a("v-icon",{attrs:{left:""}},[t._v(" mdi-file-document-outline ")]),t._v("\n      Preview\n    ")],1),t._v(" "),t.userCan("jadwal-pembelajaran-create")?a("v-tab",[a("v-icon",{attrs:{left:""}},[t._v(" mdi-table ")]),t._v("\n      Table\n    ")],1):t._e()],1),t._v(" "),a("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t.userRole("peserta-didik")?a("v-tab-item",[a("Ringkasan",{attrs:{params:t.params}})],1):t._e(),t._v(" "),t.tab&&t.userCan("jadwal-pembelajaran-create")?a("v-tab-item",{attrs:{eager:""}},[a("DataTable",{attrs:{moduleName:t.moduleName,headers:t.headers,slots:t.slots,params:t.params,hasFilter:""},scopedSlots:t._u([{key:"filter",fn:function(e){var n=e.load,r=e.params;return[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("BarqunVSelect",{attrs:{autocomplete:"",name:"ruang_id",form:r,url:"prasarana?label=kelas",itemValue:"id",itemText:"nama",label:"Ruang",dense:"",clearable:""},on:{input:n}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("BarqunVSelect",{attrs:{autocomplete:"",name:"mata_pelajaran_id",form:r,url:"mata-pelajaran",itemValue:"id",itemText:"nama",label:"Mata Pelajaran",dense:"",clearable:""},on:{input:n}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("BarqunVSelect",{attrs:{label:"Hari",name:"hari",form:r,items:["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"],dense:"",clearable:""},on:{input:n}})],1)],1)]}},{key:"modal-form",fn:function(t){var e=t.editedItem,n=t.save,r=t.dialog;return[a("ModulForm",{attrs:{form:e,dialog:r},on:{save:n}})]}},{key:"status",fn:function(e){var n=e.item;return[a("v-btn",{attrs:{rounded:"","x-small":"",color:"Aktif"==n.status?"success":"blue-grey",dark:""}},["Tidak Aktif"==n.status?a("v-icon",{attrs:{dark:"",left:""}},[t._v("\n              mdi-minus-circle\n            ")]):t._e(),t._v("\n            "+t._s(n.status)+"\n            "),"Aktif"==n.status?a("v-icon",{attrs:{dark:"",right:""}},[t._v("\n              mdi-checkbox-marked-circle\n            ")]):t._e()],1)]}}],null,!1,943461360)})],1):t._e()],1)],1)}),[],!1,null,null,null).exports}}]);